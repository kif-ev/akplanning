{% extends 'AKSubmission/submission_base.html' %}

{% load i18n %}
{% load bootstrap4 %}
{% load fontawesome_5 %}
{% load static %}
{% load tz %}

{% block title %}{% trans "AKs" %}: {{ event.name }} - {% trans "New AK" %}{% endblock %}

{% block imports %}
    <link rel="stylesheet" href="{% static 'common/vendor/chosen-js/chosen.css' %}">
    <link rel="stylesheet" href="{% static 'common/css/bootstrap-chosen.css' %}">

    {% include "AKModel/load_fullcalendar_availabilities.html" %}

    <script>
    {% get_current_language as LANGUAGE_CODE %}

    document.addEventListener('DOMContentLoaded', function () {
        createAvailabilityEditors(
            '{{ event.timezone }}',
            '{{ LANGUAGE_CODE }}',
            '{{ event.start | timezone:event.timezone | date:"Y-m-d H:i:s" }}',
            '{{ event.end | timezone:event.timezone | date:"Y-m-d H:i:s" }}'
        );
    });
    </script>
{% endblock %}

{% block breadcrumbs %}
    {% include "AKSubmission/submission_breadcrumbs.html" %}
    <li class="breadcrumb-item"><a
            href="{% url 'submit:submission_overview' event_slug=event.slug %}">{% trans "AK Submission" %}</a></li>
    <li class="breadcrumb-item"><a
            href="{% url 'submit:akowner_edit' event_slug=event.slug slug=owner.slug %}">{{ owner.slug }}</a></li>
    <li class="breadcrumb-item active">{% trans "New AK" %}</li>
{% endblock %}

{% block content %}
    {% include "messages.html" %}

    {% block headline %}
        <h2>{% trans 'New AK' %}</h2>
    {% endblock %}
    <form method="POST" class="post-form">{% csrf_token %}
        {% block form_contents %}
            {% bootstrap_form form %}
        {% endblock %}
        {% buttons %}
            <button type="submit" class="save btn btn-primary float-right">
                {% fa5_icon "check" 'fas' %} {% trans "Submit" %}
            </button>

            <button type="reset" class="btn btn-danger">
                {% fa5_icon "undo-alt" 'fas' %} {% trans "Reset Form" %}
            </button>

            <a href="{% url 'submit:submission_overview' event_slug=event.slug %}" class="btn btn-secondary">
                {% fa5_icon "times" 'fas' %} {% trans "Cancel" %}
            </a>
        {% endbuttons %}
    </form>
{% endblock %}

{% block bottom_script %}
    <script src="{% static 'common/vendor/chosen-js/chosen.jquery.js' %}"></script>
    <script>
        $(function () {
            $('.chosen-select').chosen();
        });
    </script>
{% endblock %}

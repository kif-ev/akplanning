{% extends 'AKSubmission/base_submission.html' %}

{% load i18n %}
{% load fontawesome %}

{% block title %}{% trans "AKs" %}: {{ event.name }} - {% trans "AK Submission" %}{% endblock %}

{% block imports %}
<style>
/* Prevent wrapping of buttons in AK table */
.table td:nth-child(5) {
    white-space: nowrap;
}
</style>
{% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item">AKPlanning</li>
    <li class="breadcrumb-item">{{ event.slug }}</li>
    <li class="breadcrumb-item active">{% trans "AK Submission" %}</li>
{% endblock %}

{% block content %}
    <h1>{% trans "AKs" %}: {{ event.name }}</h1>

    {% include "AKSubmission/messages.html" %}

    {% blocktrans %}On this page you can see a list of current AKs, change them and add new ones.{% endblocktrans %}

    <div class="jumbotron" style="margin-top:20px;">
        <form method="POST" action="#" class="form-row">
            {% csrf_token %}
            <a href="{% url 'submit:submit_ak_wish' event_slug=event.slug  %}" class="btn btn-info">
                {% trans "New AK Wish" %}
            </a>
            <span style="font-size: 1.5em">
                &nbsp;&nbsp; | &nbsp;
                <label for="selectOwnerId" class="align-middle d-inline">{% trans "Who" %}:</label>
            </span>&nbsp;&nbsp;
            <select name="owner_id" id="selectOwnerId" class="">
                <option value="-1">{% trans "I do not own AKs yet" %}</option>
                {% for owner in existingOwners %}
                    <option value="{{ owner.pk }}">{{ owner }}</option>
                {% endfor %}
            </select> &nbsp;&nbsp;
            <input
                    type="submit"
                    class="btn btn-primary"
                    value="{% trans "New AK" %}"
                    formaction="{% url 'submit:akowner_select' event_slug=event.slug %}"
            />&nbsp;&nbsp;
            <input
                    type="submit"
                    class="btn btn-success"
                    value="{% trans 'Edit Person Info' %}"
                    formaction="{% url 'submit:akowner_edit_dispatch' event_slug=event.slug %}"
            />
        </form>
    </div>


    <h2>{% trans "Current AKs" %}</h2>

    <noscript>
        {% include "AKSubmission/ak_list_table.html" %}
    </noscript>

    <ul class="nav nav-tabs" style="margin-bottom:15px">
        {% for category, _ in categories %}
          <li class="nav-item">
            <a class="nav-link {% if forloop.first %}active{% endif %}" data-toggle="tab" href="#category_{{ category.pk }}">{{ category.name }}</a>
          </li>
        {% endfor %}
    </ul>

    <div id="akListTabbed" class="tab-content">
        {% for category, AKs in categories %}
            <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="category_{{ category.pk }}">
                <p><b>{{ category.name }}:</b> {{ category.description }}</p>
                {% include "AKSubmission/ak_list_table.html" %}
            </div>
        {% endfor %}
    </div>

{% endblock %}

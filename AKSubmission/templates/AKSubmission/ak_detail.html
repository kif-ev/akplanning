{% extends 'AKSubmission/base_submission.html' %}

{% load i18n %}
{% load fontawesome %}

{% load tags_AKSubmission %}

{% block title %}{% trans "AKs" %}: {{ ak.event.name }} - {% trans "AK" %}: {{ ak.name }}{% endblock %}

{% block breadcrumbs %}
    {% include "AKSubmission/submission_breadcrumbs.html" %}
    <li class="breadcrumb-item"><a
            href="{% url 'submit:submission_overview' event_slug=ak.event.slug %}">{% trans "AK Submission" %}</a></li>
    <li class="breadcrumb-item active">{{ ak.name }}</li>
{% endblock %}

{% block content %}
    {% include "AKSubmission/messages.html" %}

    <div class="float-right">
        {% if ak.link != "" %}
            <a href="{{ ak.link }}" class="btn btn-info">{% fontawesome_icon 'external-link-alt' %}</a>
        {% endif %}
        {% if ak.event.active %}
            <a href="{% url 'submit:ak_edit' event_slug=ak.event.slug pk=ak.pk %}"
               class="btn btn-success">{% fontawesome_icon 'pencil-alt' %}</a>
        {% endif %}    </div>

    <h2>{% if ak.wish %}{% trans "AK Wish" %}: {% endif %}{{ ak.name }}</h2>

    <table class="table table-borderless">
        <tr>
            <td>{% trans "Who?" %}</td>
            <td>{{ ak.owners_list }}</td>
        </tr>
        <tr>
            <td>{% trans 'Category' %}</td>
            <td>
                {% category_linked_badge ak.category ak.event.slug %}
            </td>
        </tr>
        <tr>
            <td>{% trans "Present this AK" %}</td>
            <td>{{ ak.present | bool_symbol }}</td>
        </tr>
        <tr>
            <td>{% trans "Tags" %}</td>
            <td>
                {% tag_list ak.tags.all ak.event.slug %}
            </td>
        </tr>
        <tr>
            <td>{% trans "Reso?" %}</td>
            <td>
                {{ ak.reso | bool_symbol }}
            </td>
        </tr>
    </table>

    <p style="margin-top: 30px;margin-bottom: 30px;">{{ ak.description }}</p>



    <table class="table">
        <thead>
        <tr>
            <th>{% trans "When?" %}</th>
            <th>{% trans "Duration" %}</th>
            <th>{% trans "Room" %}</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for slot in ak.akslot_set.all %}
            <tr>
                <td>{{ slot.start_simplified }}</td>
                <td>{{ slot.duration }}</td>
                <td>{{ slot.room }}</td>
                <td>
                    {% if not slot.start %}
                        <a href="{% url 'submit:akslot_edit' event_slug=ak.event.slug pk=slot.pk %}"
                           class="btn btn-success">{% fontawesome_icon 'pencil-alt' %}</a>
                        <a href="{% url 'submit:akslot_delete' event_slug=ak.event.slug pk=slot.pk %}"
                           class="btn btn-danger">{% fontawesome_icon 'times' %}</a>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if ak.event.active %}
        <div class="">
            <a href="{% url 'submit:akslot_add' event_slug=ak.event.slug pk=ak.pk %}"
               class="btn btn-success">{% fontawesome_icon 'plus' %} {% trans "Add another slot" %}</a>
        </div>
    {% endif %}

{% endblock %}
